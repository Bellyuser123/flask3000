<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>E-Vastik Patrak</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div
      class="max-w-4xl mx-auto px-4 sm:px-8 py-8 mt-10 bg-white rounded-lg shadow-lg"
    >
      <h1 class="text-3xl font-bold text-[#006400] mb-6 text-center">
        E-Vastik Patark Form
      </h1>

      <!-- Repeat this block for each member -->
      <div class="border-t pt-6 mb-10">
        {% if mem.relation == 1 %}
        <h2 class="text-2xl font-semibold text-[#006459] mb-4">
          Edit Family Head's Details
        </h2>
        {% elif id.split("?")[0] == "new" %}
        <h2 class="text-2xl font-semibold text-[#006459] mb-4">
          Add Member Details
        </h2>
        {% else %}
        <h2 class="text-2xl font-semibold text-[#006459] mb-4">
          Edit Member Details
        </h2>
        {% endif %}

        <form
          method="POST"
          enctype="/edit/{{ type }}/{{ id }}"
          class="space-y-6"
        >
          <!-- Name -->
          <div>
            <label class="block font-medium mb-1"
              >Name <span class="text-red-500">*</span></label
            >
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <input
                type="text"
                name="fn"
                placeholder="First Name"
                {% if id.split("?")[0] != "new" %}value="{{ mem.name.split(" ")[1] }}"{% endif %}
                required
                minlength="3"
                maxlength="25"
                class="border p-2 rounded-md w-full"
              />
              <input
                type="text"
                name="mn"
                placeholder="Middle Name"
                {% if id.split("?")[0] != "new" %}value="{{ mem.name.split(" ")[2] }}"{% endif %}
                required
                minlength="3"
                maxlength="25"
                class="border p-2 rounded-md w-full"
              />
              <input
                type="text"
                name="ln"
                placeholder="Last Name"
                {% if id.split("?")[0] != "new" %}value="{{ mem.name.split(" ")[0] }}"{% endif %}
                required
                minlength="3"
                maxlength="25"
                class="border p-2 rounded-md w-full"
              />
            </div>
          </div>

          <!-- Father's Name -->
          <div>
            <label class="block font-medium mb-1"
              >Father's Name <span class="text-red-500">*</span></label
            >
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <input
                type="text"
                name="ffn"
                placeholder="First Name"
                {% if id.split("?")[0] != "new" %}value="{{ mem.father.split(" ")[1] }}"{% endif %}
                required
                minlength="3"
                maxlength="25"
                class="border p-2 rounded-md w-full"
              />
              <input
                type="text"
                name="fmn"
                placeholder="Middle Name"
                {% if id.split("?")[0] != "new" %}value="{{ mem.father.split(" ")[2] }}"{% endif %}
                required
                minlength="3"
                maxlength="25"
                class="border p-2 rounded-md w-full"
              />
              <input
                type="text"
                name="fln"
                placeholder="Last Name"
                {% if id.split("?")[0] != "new" %}value="{{ mem.father.split(" ")[0] }}"{% endif %}
                required
                minlength="3"
                maxlength="25"
                class="border p-2 rounded-md w-full"
              />
            </div>
          </div>

          <!-- Gender -->
          <div>
            <label class="block font-medium mb-1"
              >Gender <span class="text-red-500">*</span></label
            >
            <select name="gender" required class="w-full border p-2 rounded-md">
              <option value="" disabled selected>Select</option>
              <option value="M" {% if mem.gender == "M" %}selected{% endif %}>Male</option>
              <option value="F" {% if mem.gender == "F" %}selected{% endif %}>Female</option>
            </select>
          </div>

          <!-- Relation with Family Head -->
          {% if mem.relation == 1 %}
          <div>
            <label class="block font-medium mb-1"
              >Relation with Family Head
              <span class="text-red-500">*</span></label
            >
            <select
              name="relation"
              required
              class="w-full border p-2 rounded-md"
            >
              <option value="" disabled>Select relation</option>
              <option value="1" selected>Self</option>
              <option value="2" disabled>Father</option>
              <option value="3" disabled>Mother</option>
              <option value="4" disabled>Wife</option>
              <option value="5" disabled>Husband</option>
              <option value="6" disabled>Son</option>
              <option value="7" disabled>Daughter</option>
              <option value="8" disabled>Brother</option>
              <option value="9" disabled>Sister</option>
              <option value="10" disabled>Grandfather</option>
              <option value="11" disabled>Grandmother</option>
              <option value="12" disabled>Grandson</option>
              <option value="13" disabled>Granddaughter</option>
              <option value="14" disabled>Father-in Law</option>
              <option value="15" disabled>Mother-in Law</option>
              <option value="16" disabled>Daughter-in Law</option>
              <option value="17" disabled>Son-in Law</option>
              <option value="18" disabled>Other</option>
            </select>
          </div>
          {% elif id.split("?")[0] == "new" %}
          <div>
            <label class="block font-medium mb-1"
              >Relation with Family Head
              <span class="text-red-500">*</span></label
            >
            <select
              name="relation"
              required
              class="w-full border p-2 rounded-md"
            >
              <option value="" disabled selected>Select relation</option>
              <option value="1" disabled>Self</option>
              <option value="2">Father</option>
              <option value="3">Mother</option>
              <option value="4">Wife</option>
              <option value="5">Husband</option>
              <option value="6">Son</option>
              <option value="7">Daughter</option>
              <option value="8">Brother</option>
              <option value="9">Sister</option>
              <option value="10">Grandfather</option>
              <option value="11">Grandmother</option>
              <option value="12">Grandson</option>
              <option value="13">Granddaughter</option>
              <option value="14">Father-in Law</option>
              <option value="15">Mother-in Law</option>
              <option value="16">Daughter-in Law</option>
              <option value="17">Son-in Law</option>
              <option value="18">Other</option>
            </select>
          </div>
          {% else %}
          <div>
            <label class="block font-medium mb-1"
              >Relation with Family Head
              <span class="text-red-500">*</span></label
            >
            <select
              name="relation"
              required
              class="w-full border p-2 rounded-md"
            >
              <option value="" disabled selected>Select relation</option>
              <option value="1" disabled>Self</option>
              <option value="2" {% if mem.relation == 2 %}selected{% endif %}>Father</option>
              <option value="3" {% if mem.relation == 3 %}selected{% endif %}>Mother</option>
              <option value="4" {% if mem.relation == 4 %}selected{% endif %}>Wife</option>
              <option value="5" {% if mem.relation == 5 %}selected{% endif %}>Husband</option>
              <option value="6" {% if mem.relation == 6 %}selected{% endif %}>Son</option>
              <option value="7" {% if mem.relation == 7 %}selected{% endif %}>Daughter</option>
              <option value="8" {% if mem.relation == 8 %}selected{% endif %}>Brother</option>
              <option value="9" {% if mem.relation == 9 %}selected{% endif %}>Sister</option>
              <option value="10" {% if mem.relation == 10 %}selected{% endif %}>Grandfather</option>
              <option value="11" {% if mem.relation == 11 %}selected{% endif %}>Grandmother</option>
              <option value="12" {% if mem.relation == 12 %}selected{% endif %}>Grandson</option>
              <option value="13" {% if mem.relation == 13 %}selected{% endif %}>Granddaughter</option>
              <option value="14" {% if mem.relation == 14 %}selected{% endif %}>Father-in Law</option>
              <option value="15" {% if mem.relation == 15 %}selected{% endif %}>Mother-in Law</option>
              <option value="16" {% if mem.relation == 16 %}selected{% endif %}>Daughter-in Law</option>
              <option value="17" {% if mem.relation == 17 %}selected{% endif %}>Son-in Law</option>
              <option value="18" {% if mem.relation == 18 %}selected{% endif %}>Other</option>
            </select>
          </div>
          {% endif %}

          <!-- Peer -->
          <div>
            <label class="block font-medium mb-1">Peear</label>
            <input
              type="text"
              name="peear"
              placeholder="Peear"
              {% if id.split("?")[0] != "new" %}value="{{ mem.peear }}"{% endif %}
              class="w-full border p-2 rounded-md"
            />
          </div>

          <!-- Marital Status -->
          <div>
            <label class="block font-medium mb-1"
              >Marital Status <span class="text-red-500">*</span></label
            >
            <select
              name="marriage"
              required
              class="w-full border p-2 rounded-md"
            >
              <option value="" disabled selected>Select status</option>
              <option value="2" {% if mem.marriage == 2 %}selected{% endif %}>Unmarried</option>
              <option value="1" {% if mem.marriage == 1 %}selected{% endif %}>Married</option>
              <option value="4" {% if mem.marriage == 4 %}selected{% endif %}>Widowed</option>
              <option value="3" {% if mem.marriage == 3 %}selected{% endif %}>Divorced</option>
            </select>
          </div>

          <!-- Date of Birth -->
          <div>
            <label class="block font-medium mb-1"
              >Date of Birth <span class="text-red-500">*</span></label
            >
            <input
              type="date"
              name="dob"
              {% if id.split("?")[0] != "new" %}value="{{ mem.dob | format_date_for_input }}"{% endif %}
              required
              class="w-full border p-2 rounded-md"
            />
          </div>

          <!-- Photo -->
          <div>
            <label class="block font-medium mb-1">Upload Photo</label>
            <input
              type="file"
              name="photo"
              accept="image/*"
              class="w-full"
              {% if id.split("?")[0] != "new" %}value="{{ mem.photo }}"{% endif %}
            />
          </div>

          <!-- Education -->
          <div>
            <label class="block font-medium mb-1"
              >Education <span class="text-red-500">*</span></label
            >
            <input
              type="text"
              name="edu"
              {% if id.split("?")[0] != "new" %}value="{{ mem.edu }}"{% endif %}
              required
              class="w-full border p-2 rounded-md"
            />
          </div>

          <!-- Occupation -->
          <div>
            <label class="block font-medium mb-1"
              >Occupation <span class="text-red-500">*</span></label
            >
            <input
              type="text"
              name="occu"
              {% if id.split("?")[0] != "new" %}value="{{ mem.occu }}"{% endif %}
              required
              class="w-full border p-2 rounded-md"
            />
          </div>

          <!-- Mobile No. -->
          <div>
            <label class="block font-medium mb-1"
              >Mobile No. <span class="text-red-500">*</span></label
            >
            <input
              type="text"
              name="phone"
              minlength="10"
              maxlength="11"
              {% if id.split("?")[0] != "new" %}value="{{ mem.phone }}"{% endif %}
              required
              class="w-full border p-2 rounded-md"
            />
          </div>

          <!-- Email -->
          <div>
            <label class="block font-medium mb-1">Email</label>
            <input
              type="email"
              name="email"
              {% if mem.email != "N/A" %}
              value="{{ mem.email }}"
              {% endif %}
              class="w-full border p-2 rounded-md"
            />
          </div>

          <!-- Blood Group -->
          <div>
            <label class="block font-medium mb-1"
              >Blood Group <span class="text-red-500">*</span></label
            >
            <select name="blood" required class="w-full border p-2 rounded-md">
              <option value="" disabled selected>Select blood group</option>
              <option value="1" {% if mem.blood == 1 %}selected{% endif %}>A+</option>
              <option value="2" {% if mem.blood == 2 %}selected{% endif %}>A-</option>
              <option value="3" {% if mem.blood == 3 %}selected{% endif %}>B+</option>
              <option value="4" {% if mem.blood == 4 %}selected{% endif %}>B-</option>
              <option value="5" {% if mem.blood == 5 %}selected{% endif %}>O+</option>
              <option value="6" {% if mem.blood == 6 %}selected{% endif %}>O-</option>
              <option value="7" {% if mem.blood == 7 %}selected{% endif %}>AB+</option>
              <option value="8" {% if mem.blood == 8 %}selected{% endif %}>AB-</option>
            </select>
          </div>

          <!-- Submit Button (optional if only one member) -->
          <div class="text-center mt-6 sm:mt-8">
            <button
              type="submit"
              class="bg-[#006400] text-white font-semibold py-2 px-6 rounded hover:bg-green-800"
            >
              Save Member
            </button>
          </div>
        </form>
      </div>
      <!-- End of member section -->
    </div>
  </body>
</html>
